<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>IMuSA Sitio Web</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto"> 
        <link rel="stylesheet" href="../css/document.css">
        <link rel="stylesheet" href="../css/nav.css">
        <link rel="stylesheet" href="../css/registrarse.css">
        <script type="text/javascript" src="../lib/jquery-3.3.1.min.js"></script>
    </head>
    <body>
        <header>
            <div id="imagen">
                <img src="../logo.png"> 
            </div>
            <div id="nombre-pagina">
                Instituto Municipal de Salud Animal
            </div>
            <div id="space"></div>
            <div id="costado-imagen">
                IMuSA
            </div>
        </header>
    
        <nav>
            <div id="inicio" class="center-item">
                <a href="../index.html">INICIO</a>
            </div>
            <div id="contacto" class="center-item">
                <a href="#">CONTACTO</a>
            </div>
            <div id="adopcion" class="center-item">
                <a href="#">ADOPCION</a>
            </div>
            <div id="sesion" class="center-item">
                <a href="./sesion.html">[sesion]</a>
            </div>
        </nav>

        <article id="container-registro">
            <h3>Registro</h3>
            <p>Complete los siguientes campos para concretar el registro</p>

            <p>Nombre: <input type="text" name="nombre" required> </p>
            <p>Apellido: <input type="text" name="apellido" required> </p>
            <p>Email: <input type="email" name="mail" required> </p>
            <p>Username: <input type="text" name="username" required> </p>
            <p>Password: <input type="password" name="password" required> </p>
            <p>Repita password: <input type="password" id="confirm" required> </p>
            <p>Fecha nacimiento: <input type="date" name="nacimiento" required> </p>
            <p>Nacionalidad: <input type="text" name="nacionalidad" required> </p>
            <p>D.N.I.: <input id="dni" type= "number" name="dni"> </p>
            <p>A continuacion ponga una descripcion opcional de su persona: </p>
            <textarea name="descripcion" style="max-width: 50%;
             max-height: 60px; resize: none; margin-left: 10px"></textarea>
            <div id="submit-box">
                <button id="finalizar">Finalizar</button>
            </div>
        </article>

        <script>
            function checkInput() {
                var nombre       = $("input[name=nombre]");
                var apellido     = $("input[name=apellido]");
                var mail         = $("input[name=mail]");
                var username     = $("input[name=username]");
                var password     = $("input[name=password]");
                var nacimiento   = $("input[name=nacimiento]");
                var nacionalidad = $("input[name=nacionalidad]");
                var dni          = $("input[name=dni]");
                var descripcion  = $("textarea[name=descripcion]");

                var temp = [nombre, apellido, mail, username, password, nacimiento, dni, nacionalidad];
                var band = true;
                temp.map(function(el, _, _){ 
                    if(el.val() == '') {
                        el.css('border', '2px solid red');
                        band = false;
                    }
                })

                var confirm = $("#confirm")
                if(confirm.val() != password.val()){
                    confirm.css('border', '2px solid red')
                    band = false;
                }

                if(!band) 
                    return false
                else {
                    return {
                        nombre: nombre.val(),
                        apellido: apellido.val(),
                        mail: mail.val(),
                        username: username.val(),
                        password: password.val(),
                        nacimiento: nacimiento.val(),
                        nacionalidad: nacionalidad.val(),
                        dni: dni.val(),
                        descripcion: descripcion.val()
                    }
                }
            }

            $("#finalizar").click(function() {
                var input = checkInput();

                if(input) {
                    $.post(
                        '../registro.php',
                        input,
                        function(data, status, xhr) {
                            console.log('Request status: ' + status);
                            alert(data);
                        }
                    );
                }
            })
        </script>
    </body>
</html>